\section{A root grading for Yangian extended toroidal Lie algebra} \label{section: root_grading_for_yangian_EALAs}
    As is now standard practice in infinite-dimensional Lie theory, infinite-dimensional Lie algebra induced from finite-dimensional simple Lie algebras ought to carry a grading by some kind of induced \say{higher root lattice} (e.g. affine Kac-Moody algebras are graded by the affinisations of the root lattices of the underlying finite-dimensional simple Lie algebras; cf. lemma \ref{lemma: root_grading_for_affine_lie_algebras}). There are many reasons as to why one might seek to endow Lie algebras with such gradings, but one rather important reason is that without a root grading of some sort - which in turn would give rise to some kind of triangular decomposition - one would have no hope of setting up a theory of highest-weight modules which, from practical experiences with cases such as $\g$ and $\hat{\g}$, we know to be an extremely powerful method for attacking the problem of classifying say, simple modules over Lie algebras. Therfore, it is natural to ask the question of whether or not our Yangian extended toroidal Lie algebra $\extendedtoroidal$ can also be endowed with such an induced grading, primarily because $\extendedtoroidal$ carries a non-degenerate invariant symmetric bilinear form.

    \subsection{Positive/negative extended toroidal Lie algebras}
        For the purposes of establishing a triangular decomposition for $\extendedtoroidal$, we will be firstly needing an auxiliary Lie subalgebra of $\toroidal$ that is orthogonally complementary to $\toroidal^{\positive}$ inside $\toroidal$, which is to give rise to a Lie subalgebra $\extendedtoroidal^{\negative}$ of $\extendedtoroidal$ that is orthogonally complementary to $\extendedtoroidal^{\positive}$.

        Set:
            $$A^{\negative} := t^{-1} k[v^{\pm 1}, t^{-1}]$$
            $$\g_{[2]}^{\negative} := \g \tensor_k A^{\negative}$$
        The $k$-vector space $\g_{[2]}^{\negative}$ will be endowed with the bracket given by:
            $$[x f, y g]_{\g_{[2]}^{\negative}} := [x, y]_{\g} fg$$
        for all $x, y \in \g$ and all $f, g \in A^{\neg}$. It is not hard to see that there is a direct sum decomposition of Lie algebras:
            $$\g_{[2]} \cong \g_{[2]}^{\positive} \oplus \g_{[2]}^{\negative}$$
        Furthermore, the Lie algebra $\g_{[2]}^{\negative}$ (much like $\g_{[2]}$ and $\g_{[2]}^{\positive}$) is also perfect and hence, according to proposition \ref{prop: perfect_lie_algebras_admit_UCEs}, admits a UCE:
            $$\toroidal^{\negative} := \uce(\g_{[2]}^-)$$
        According to theorem \ref{theorem: kassel_realisation}, it can be identified as:
            $$\toroidal^{\negative} \cong \g_{[2]}^{\negative} \oplus \z_{[2]}^{\negative}$$
        with $\z_{[2]}^{\negative}$ being the orthogonal complement of $\z_{[2]}^{\positive}$ inside $\z_{[2]}$, i.e.:
            $$\z_{[2]} = \z_{[2]}^{\positive} \oplus \z_{[2]}^{\negative}$$
        This can be inferred from the computations of bases for $\z_{[2]}$ and $\z_{[2]}^{\positive}$ carried out in example \ref{example: toroidal_lie_algebras_centres}.
        
        Let us now make the following constructions:
        \begin{itemize}
            \item
                $$\d_{[2]}^{\positive} := ( \bigoplus_{(r, s) \in \Z \x \Z_{\leq 0} } k D_{r, s} ) \oplus k D_t$$
                $$\d_{[2]}^{\negative} := ( \bigoplus_{(r, s) \in \Z \x \Z_{> 0} } k D_{r, s} ) \oplus k D_v$$
            shall respectively be the \textit{vector subspaces}\footnote{Not yet Lie subalgebras!} of $\d_{[2]}$ which are graded-dual to $\z_{[2]}^{\positive/\negative}$ with respect to $(-, -)_{\extendedtoroidal}$;
            \item
                $$\extendedtoroidal^{\positive/\negative} := \toroidal^{\positive/\negative} \oplus \d_{[2]}^{\positive/\negative}$$
        \end{itemize}
        \begin{remark}
            These constructions give rise to two orthogonally complementary Lie subalgebras of $\extendedtoroidal$ that we will make use of to establish a triangular decomposition for $\extendedtoroidal$ (cf. proposition \ref{prop: triangular_decomposition_of_extended_toroidal_lie_algebras}), provided that we make the assumption that:
                $$\extendedtoroidal \cong \toroidal \rtimes \d_{[2]}$$
            from now on. Our reasoning for making this assumption is that, without it, it is not clear (perhaps not even guaranteed) that given $D, D' \in \d_{[2]}^{\positive/\negative}$, we would then also have:
                $$[D, D']_{\extendedtoroidal} \in \d_{[2]}^{\positive/\negative}$$
            as we only know \textit{a priori} that $[D, D']_{\extendedtoroidal} \in \d_{[2]}^{\positive/\negative} \oplus \z_{[2]}$, not even whether or not it is true that $[D, D']_{\extendedtoroidal} \in \d_{[2]}^{\positive/\negative} \oplus \z_{[2]}^{\positive/\negative}$ (cf. remark \ref{remark: non_uniqueness_of_yangian_extended_lie_algebras} and theorem \ref{theorem: non_uniqueness_of_yangian_extended_lie_algebras}). In other words, without the assumption, it is not clear that $\d_{[2]}^{\positive/\negative}$ would be Lie subalgebras of $\d_{[2]}$, and consequently, whether or not the vector spaces $\extendedtoroidal^{\positive/\negative}$ would be Lie subalgebras of $\extendedtoroidal$ (as it is already known that the vector spaces $\toroidal^{\positive/\negative}$ are Lie subalgebras of $\toroidal$). If we do assume that $\extendedtoroidal \cong \toroidal \rtimes \d_{[2]}$, on the other hand, then through lemma \ref{lemma: positive/negative_extended_toroidal_lie_algebras}, we shall see that indeed, the vector spaces $\extendedtoroidal^{\positive/\negative}$ are closed under $[-, -]_{\extendedtoroidal}$ and hence are Lie subalgebras of $\extendedtoroidal$.
        \end{remark}
        \todo[inline]{Added explanation for the assumption that $\extendedtoroidal \cong \toroidal \rtimes \d_{[2]}$.}
        
        \begin{lemma}[Positive/negative extended toroidal Lie algebras] \label{lemma: positive/negative_extended_toroidal_lie_algebras}
            The vector spaces $\extendedtoroidal^{\positive/\negative}$ are Lie subalgebras of $\extendedtoroidal$ with respect to the Lie bracket $[-, -]_{\extendedtoroidal}$.
        \end{lemma}
            \begin{proof}
                Given how $\d_{[2]}$ acts on $\g_{[2]}$ and on $\z_{[2]}$ (cf. lemmas \ref{lemma: derivation_action_on_multiloop_algebras} and \ref{lemma: derivation_action_on_toroidal_centres} respectively), which implies in particular that:
                    $$[\d_{[2]}, \toroidal^{\positive/\negative}] \subseteq \toroidal^{\positive/\negative}$$
                it shall suffice to only demonstrate that the vector spaces $\d_{[2]}^{\positive/\negative}$ are Lie subalgebras of $\d_{[2]}$ in order to show that $\extendedtoroidal^{\positive/\negative}$ are Lie subalgebras of $\extendedtoroidal$. To do this, it suffices to verify that:
                    $$(r, s) \in \Z \x \Z_{\leq 0} \implies [D_{r, s}, D_t] \in \d_{[2]}^{\positive}$$
                    $$(r, s) \in \Z \x \Z_{> 0} \implies [D_{r, s}, D_v] \in \d_{[2]}^{\negative}$$
                for which we rely on the assumption that:
                    $$\extendedtoroidal \cong \toroidal \rtimes \d_{[2]}$$
                This can be inferred from the explicit computations done in the proof of lemma \ref{lemma: explicit_commutators_between_basis_elements_of_toroidal_central_orthogonal_complement}.
            \end{proof}

    \subsection{Root grading and triangular decomposition for Yangian extended toroidal Lie algebras}
        For what follows, let us remind the reader that it is important that we make the assumption that:
            $$\extendedtoroidal \cong \toroidal \rtimes \d_{[2]}$$
        Also, for notions related to untwisted affine Kac-Moody algebras, we refer the reader back to subsection \ref{subsection: a_fixed_untwisted_affine_kac_moody_algebra}.
            
        \begin{proposition}[Induced $Q \x \Z$-grading on $\extendedtoroidal$] \label{prop: root_grading_on_extended_toroidal_lie_algebras}
            Define the following grading on $\toroidal$\footnote{Note that we can not simply define a grading on $\g_{[2]}$ alone, since $[\g_{[2]}, \g_{[2]}]_{\toroidal} \not \subset \g_{[2]}$.}, naturally induced by the natural $Q \x \Z$-grading on $\g$.
            
            Firstly, let us declare that:
                $$\deg x v^m t^p := (\alpha, m)$$
            for all $\alpha \in \Phi$, all $x \in \g_{\alpha}$, and all $(m, p) \in \Z^2$. This defines a $Q \x \Z$-grading on $\g_{[2]}$. 
            
            If we are to extend the $Q \x \Z$-grading on $\toroidal$ as above to $\extendedtoroidal$ then the Lie bracket $[-, -]_{\extendedtoroidal}$ ought to be $Q \x \Z$-graded in a compatible manner. Given the adjoint actions of the derivations $D_{r, s}, D_v, D_t$ on the monomials $x v^m t^p \in \g_{[2]}$ (in particular, how said actions affect the $Q \x \Z$-degrees of said monomials; cf. lemma \ref{lemma: derivation_action_on_multiloop_algebras}), let us declare that:
                $$\forall (r, s) \in \Z^2: \deg D_{r, s} := (0, -r)$$
                $$\deg D_v = \deg D_t := (0, 0)$$
            We would also like the bilinear form $(-, -)_{\extendedtoroidal}$ to be of total degree $(0, 0)$, which forces:
                $$\forall (r, s) \in \Z^2: \deg K_{r, s} := (0, r)$$
                $$\deg c_v = \deg c_t := (0, 0)$$
        \end{proposition}
            \begin{proof}
                Let us check whether the constructed $Q \x \Z$-grading on $\extendedtoroidal$ is well-defined.
    
                Firstly, let us check that the grading is well-define on $\toroidal := \g_{[2]} \oplus \z_{[2]}$. To this end, pick $x, y \in \g$ and that $x \in \g_{\alpha}, y \in \g_{\beta}$ for some $\alpha, \beta \in \Phi \cup \{0\}$; also, choose some arbitrary $(m, p), (n, q) \in \Z^2$. Next, consider:
                    $$
                        \begin{aligned}
                            [x v^m t^p, y v^n t^q]_{\toroidal} & = [x, y]_{\g} v^{m + n} t^{p + q} + (x, y)_{\g} v^n t^p \bar{d}(v^m t^p)
                            \\
                            & = [x, y]_{\g} v^{m + n} t^{p + q} + (x, y)_{\g} \delta_{(m, p) + (n, q), (0, 0)} ( n c_v + q c_t ) + (np - mq) K_{m + n, p + q}
                        \end{aligned}
                    $$
                (cf. example \ref{example: toroidal_lie_algebras_centres}). Now, note that if either:
                    $$\alpha + \beta = 0, \alpha \not = 0$$
                or:
                    $$\alpha = \beta = 0$$
                (i.e. $x, y \in \h$) then:
                    $$[x, y] \in \h$$
                and hence:
                    $$\deg [x, y]_{\g} v^{m + n} t^{p + q} = \deg K_{m + n, p + q} = (0, m + n)$$
                On the other hand, if:
                    $$\alpha + \beta \not = 0$$
                then:
                    $$[x, y] \in \n^- \oplus \n^+$$
                which means in particular that at leeast either $x$ or $y$ is nilpotent under the vector representation of $\g$, and hence:
                    $$(x, y)_{\g} = 0$$
                as $(-, -)_{\g}$ is some non-zero multiple of the trace form, and traces of nilpotent matrices are equally $0$. Hence, in this case, we have that:
                    $$\deg [x v^m t^p, y v^n t^q]_{\toroidal} = \deg [x, y]_{\g} v^{m + n} t^{p + q} = (\alpha + \beta, m + n)$$
                Both cases together show that the constructed $Q \x \Z$-grading on $\toroidal$ is well-defined. 
                
                Secondly, note that from how commutators of elements of $\d_{[2]} := \bigoplus_{(r, s) \in \Z^2} k D_{r, s} \oplus k D_v \oplus k D_t$ are given (cf. lemma \ref{lemma: explicit_commutators_between_basis_elements_of_toroidal_central_orthogonal_complement}), one sees that:
                    $$\deg [D_v, D_t] = (0, 0) = \deg D_v + \deg D_t$$
                    $$\deg [D_v, D_{r, s}] = (0, -r) = \deg D_v + \deg D_{r, s}$$
                    $$\deg [D_t, D_{r, s}] = (0, -r) = \deg D_t + \deg D_{r, s}$$
                    $$\deg [D_{a, b}, D_{r, s}] = \deg D_{a + r, b + s + 1} = (0, -(a + r)) = \deg D_{a, b} + \deg D_{r, s}$$
                Thus, the constructed grading is well-defined on $\d_{[2]}$. Recall also from proposition \ref{prop: lie_bracket_on_orthogonal_complement_of_toroidal_centre} that:
                    $$[\d_{[2]}, \d_{[2]}]_{\extendedtoroidal} \subseteq \z_{[2]} \oplus \d_{[2]}$$
                with the $\d_{[2]}$-summand being the usual commutator of derivations $[-, -]$ inherited from $\der_{k}(A)$, while the $\z_{[2]}$-summand is undetermined, but can be viewed as twist of $[-, -]$ by a cocycle $\sigma \in H^2_{\Lie}(\d_{[2]}, \z_{[2]})$ (cf. theorem \ref{theorem: non_uniqueness_of_yangian_extended_lie_algebras}). For this reason, we can and must choose the restriction of $[-, -]_{\extendedtoroidal}$ down to $\d_{[2]}$ to be the usual commutator $[-, -]$ for the construction of our $Q \x \Z$-grading. 
            \end{proof}

        The following is a corollary to proposition \ref{prop: root_grading_on_extended_toroidal_lie_algebras}. One can see it to be true simply by looking at the degrees of elements of $\extendedtoroidal$. 
        \begin{theorem}[Root grading for extended toroidal Lie algebras] \label{theorem: root_grading_for_extended_toroidal_lie_algebras}
            The weight spaces of the adjoint action of $\hat{\g}$ on $\extendedtoroidal$ can be given explicitly in terms of the basis elements of the latter in the following manner:
                $$\forall (\alpha, m) \in \Phi \x \Z: \extendedtoroidal_{\alpha + m\delta} \cong \hat{\g}_{\alpha + m\delta} \tensor_k k[t^{\pm 1}]$$
                $$
                    \forall r \in \Z \setminus \{0\}: \extendedtoroidal_{r\delta} \cong \hat{\g}_{r\delta} \tensor_k k[t^{\pm 1}] \oplus \bigoplus_{s \in \Z} ( k K_{r, s} \oplus k D_{-r, s} )
                $$
                $$\extendedtoroidal_0 \cong \h \oplus (k c_v \oplus k c_t) \oplus (k D_v \oplus k D_t)$$
            Furthermore, $\extendedtoroidal$ is a weight module of $\hat{\g}$, i.e.:
                $$\extendedtoroidal \cong \bigoplus_{\beta \in \hat{\Phi} \cup \{0\}} \extendedtoroidal_{\beta}$$
        \end{theorem}
        \begin{corollary}
            Recall the triple of Lie algebras:
                $$\extendedtoroidal, \extendedtoroidal^{\positive}, \extendedtoroidal^{\negative}$$
            from lemma \ref{lemma: positive/negative_extended_toroidal_lie_algebras}. Via theorem \ref{theorem: root_grading_for_extended_toroidal_lie_algebras}, we see that the Lie subalgebras $\extendedtoroidal^{\positive/\negative}$ admit the following weight space decompositions, when regarded as $\hat{\g}$-modules of $\extendedtoroidal$:
                $$\extendedtoroidal^{\positive/\negative} \cong \bigoplus_{\beta \in \hat{\Phi} \cup \{0\}} \extendedtoroidal^{\positive/\negative}_{\beta}$$
            where, for each $\beta \in \hat{\Phi}$, we have written:
                $$\extendedtoroidal^{\positive/\negative}_{\beta} := \extendedtoroidal^{\positive/\negative} \cap \extendedtoroidal_{\beta}$$
            Explicitly, the weight spaces are given as follows:
            \todo[inline]{Fixed some typos in the descriptions of the $\hat{\g}$ weight spaces of $\extendedtoroidal^{\positive/\negative}$.}
                $$
                    \forall (\alpha, m) \in \Phi \x \Z:
                    \begin{cases}
                        \extendedtoroidal^{\positive}_{\alpha + m\delta} \cong \hat{\g}_{\alpha + m\delta} \tensor_k k[t]
                        \\
                        \extendedtoroidal^{\negative}_{\alpha + m\delta} \cong \hat{\g}_{\alpha + m\delta} \tensor_k t^{-1}k[t^{-1}]
                    \end{cases}
                $$
                $$
                    \forall r \in \Z \setminus \{0\}:
                    \begin{cases}
                        \text{$\extendedtoroidal^{\positive}_{r\delta} \cong \hat{\g}_{r\delta} \tensor_k k[t] \oplus \bigoplus_{s \in \Z_{\leq 0}} (k K_{r, s} \oplus k D_{-r, s})$ if $r > 0$}
                        \\
                        \text{$\extendedtoroidal^{\positive}_{r\delta} \cong \hat{\g}_{r\delta} \tensor_k k[t]$ if $r < 0$}
                    \end{cases}
                $$
                $$
                    \forall r \in \Z \setminus \{0\}:
                    \begin{cases}
                        \text{$\extendedtoroidal^{\positive}_{r\delta} \cong \hat{\g}_{r\delta} \tensor_k t^{-1}k[t^{-1}]$ if $r > 0$}
                        \\
                        \text{$\extendedtoroidal^{\negative}_{r\delta} \cong \hat{\g}_{r\delta} \tensor_k t^{-1}k[t^{-1}] \oplus \bigoplus_{s \in \Z_{> 0}} (k K_{r, s} \oplus k D_{-r, s})$ if $r < 0$}
                    \end{cases}
                $$
                $$\extendedtoroidal^{\positive}_0 \cong \h \oplus k c_v \oplus k D_t$$
                $$\extendedtoroidal^{\negative}_0 \cong \h \oplus k c_t \oplus k D_v$$
        \end{corollary}
        
        \begin{remark} \label{remark: toroidal_root_systems}
            The $\hat{Q}$-grading of $\extendedtoroidal$ as in theorem \ref{theorem: root_grading_for_extended_toroidal_lie_algebras} induces pairings of weight spaces in the following manner.
            \begin{enumerate}
                \item  Firstly, note that for each real root:
                    $$\alpha + m\delta \in \Re(\hat{\Phi})$$
                the corresponding root spaces:
                    $$\extendedtoroidal_{\alpha + m\delta}$$
                are free and of rank $1$ over $k[t^{\pm 1}]$, in good analogy with how real roots of an affine Kac-Moody algebras are equally of multiplicity $1$.

                If we fix:
                    $$(\alpha, m, p), (\beta, n, q) \in \Phi \x \Z^2$$
                along with root vectors:
                    $$x_{\alpha} \in \g_{\alpha}, x_{\beta} \in \g_{\beta}$$
                then:
                    $$( x_{\alpha} v^m t^p, x_{\beta} v^n t^q )_{\extendedtoroidal} = \delta_{(\alpha, m, p) + (\beta, n, q), (0, 0, -1)}$$
                This suggest to us that for each positive real root:
                    $$\alpha + m\delta \in \hat{\Phi}^+ \cong \Phi^+ \x \Z_{\geq 0}$$
                one has the following non-trivial pairing of subspaces:
                    $$\left( \extendedtoroidal^{\negative}_{\mp (\alpha + m\delta)}, \extendedtoroidal^{\positive}_{\pm (\alpha + m\delta)} \right)_{\extendedtoroidal} \not = 0$$
                \item Observe that weight-$0$ subspace:
                    $$\extendedtoroidal_0$$
                is finite-dimensional, namely of dimension $\dim_{k} \h + 2 + 2$, with each summand of $2$ corresponding to one of the direct summands $k c_v \oplus k D_v$ and $k c_t \oplus k D_t$ of $\extendedtoroidal_0$, similar to how:
                    $$\dim_{k} \hat{\h} = \dim_{k} \h + 2$$
                in the affine Kac-Moody case, where the summand of $2$ corressponds to the direct summand of the $1$-dimensional centre and the subspace spanned by the canonical degree derivation. From this, we infer that $\extendedtoroidal$ ought to admit two distinct weights:
                    $$\delta_v := (c_v, -)_{\extendedtoroidal}, \delta_t := (c_t, -)_{\extendedtoroidal}$$
                i.e. they are dual to the central elements $c_v, c_t$ under the vector space isomorphism $\extendedtoroidal_0 \xrightarrow[]{\cong} \extendedtoroidal_0^*$ given by $H \mapsto (H, -)_{\extendedtoroidal}$. Note that because:
                    $$(\d_{[2]}, \d_{[2]})_{\extendedtoroidal} = 0$$
                per the construction of the bilinear form $(-, -)_{\extendedtoroidal}$ (cf. convention \ref{conv: orthogonal_complement_of_toroidal_centres}), we have that:
                    $$(\delta_v, \delta_v)_{\extendedtoroidal} = (\delta_t, \delta_t)_{\extendedtoroidal} = 0$$

                Note also that, once again because $(\d_{[2]}, \d_{[2]})_{\extendedtoroidal} = 0$, we also have that:
                    $$(\delta_v, \delta_t)_{\extendedtoroidal} = 0$$
            \end{enumerate}
        \end{remark}
        
        The following result is nothing but a formal consequence of the discussion above.
        \begin{proposition}[Triangular decomposition for extended toroidal Lie algebras] \label{prop: triangular_decomposition_of_extended_toroidal_lie_algebras}
            With respect to the choices of positive/negative roots as in remark \ref{remark: toroidal_root_systems}, let us set:
                $$\extendedtoroidal_{\up/\low} := \bigoplus_{\beta \in \hat{Q}^{\pm} \x \Z} \extendedtoroidal_{\beta}$$
            The $\hat{Q}$-grading of the Lie algebra $\extendedtoroidal$ (respectively, of $\extendedtoroidal^{\positive/\negative}$) induces a triangular decomposition thereof as follows:
                $$\extendedtoroidal \cong \extendedtoroidal_{\low} \oplus \extendedtoroidal_0 \oplus \extendedtoroidal_{\up}$$
                $$\extendedtoroidal^{\positive/\negative} \cong \extendedtoroidal^{\positive/\negative}_{\low} \oplus \extendedtoroidal^{\positive/\negative}_0 \oplus \extendedtoroidal^{\positive/\negative}_{\up}$$
        \end{proposition}