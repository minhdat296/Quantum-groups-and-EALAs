\section{Construction of \texorpdfstring{$\gamma$}{}-extended toroidal Lie algebras}
    \subsection{\texorpdfstring{$\gamma$}{}-divergence-zero vector fields} \label{subsection: yangian_div_zero_vector_fields}
        We begin the process of constructing $\gamma$-extended toroidal Lie algebras in the sense of definition \ref{def: yangian_extended_toroidal_lie_algebras} by firstly defining so-called \say{$\gamma$-divergence-zero vector fields} (cf. definition \ref{def: yangian_div_zero_vector_fields}), with the first and foremost goal in doing so being that, we would like to be able to endow the underlying vector space $\toroidal \oplus \z(\toroidal)^{\star}$ of any $\gamma$-extended toroidal Lie algebra with a natural Lie algebra structure somehow (cf. corollary \ref{coro: lie_bracket_on_graded_dual_of_toroidal_centres}). We will be accomplishing this task by recognising that, the aforementioned $\gamma$-divergence-zero vector fields form a $\Z^2$-graded Lie subalgebra $\divzero$ of $\der(A)$ (cf. lemma \ref{lemma: yangian_div_zero_vector_fields_basic_properties} and corollary \ref{coro: yangian_div_zero_vector_fields_are_graded}) that is - as a $\Z^2$-graded vector space - isomorphic to $\z(\toroidal)^{\star}$ in a rather canonical manner (cf. proposition \ref{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}). Secondly, knowing that elements of $\z(\toroidal)^{\star}$ are identifiable with certain derivations will also help us have a concrete understanding how elements of $\z(\toroidal)^{\star}$ must \say{bracket} with those of $\toroidal$ with respect to a given $\gamma$-extended toroidal Lie algebra structure on $\toroidal \oplus \z(\toroidal)^{\star}$. In fact, this is necessary for even formulating the main theorem in this section, i.e. theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem}, where we would like to compare these bracket relations with a certain action of $\divzero$ on $\toroidal$, thereby realising that any $\gamma$-extended toroidal Lie algebra must be isomorphic to a twisted semi-direct product $\toroidal \rtimes^{\sigma} \divzero$ (cf. definition \ref{def: twisted_semi_direct_products}).
    
        \begin{definition}[$\gamma$-divergence-zero vector fields] \label{def: yangian_div_zero_vector_fields}
            Let $\divzero$ be the vector subspace of $\der(A)$ defined as follows:
                $$\divzero := \{ D \in \der(A) \mid \forall f \in A: \gamma(D(f)) = 0 \}$$
            Elements of this vector space shall be referred to as \textbf{$\gamma$-divergence-zero vector fields}.
        \end{definition}
        \begin{remark}
            The name is because if we were to consider instead the linear map $A \to \bbC$ given by $f \mapsto -\Res(f)$ then we would recover the notion of algebraically divergence-zero vector fields on the (smooth) affine scheme $\Spec \bbC[v^{\pm 1}, t^{\pm 1}]$ (cf. e.g. \cite[Exercise 1.7c]{neher_lectures_on_EALAs} and \cite{billig_talboom_category_J_for_div_zero_vector_fields_on_tori})
        \end{remark}

        \begin{lemma}[Basic properties of $\gamma$-divergence-zero vector fields] \label{lemma: yangian_div_zero_vector_fields_basic_properties}
            \begin{enumerate}
                \item $\divzero$ is a Lie subalgebra of $\der(A)$ (with the usual commutator bracket).
                \item $\divzero$ admits the following subset as a basis:
                    $$\{D_{r, s}\}_{(r, s) \in \Z^2} \cup \{D_v, D_t\}$$
                Its elements are given in terms of the partial derivatives $\del_v := \frac{\del}{\del v}$ and $\del_t := \frac{\del}{\del t}$ by:
                    $$D_{r, s} := -s v^{-r + 1} t^{-s - 1} \del_v + r v^{-r} t^{-s} \del_t$$
                    $$D_v := -v t^{-1} \del_v$$
                    $$D_t := -\del_t$$
                \item The basis elements of $\divzero$ satify the following commutation relations:
                    $$[D_v, D_t] = -D_{0, 1}$$
                    $$[D_v, D_{r, s}] = r D_{r, s + 1}$$
                    $$[D_t, D_{r, s}] = s D_{r, s + 1}$$
                    $$[D_{a, b}, D_{r, s}] = (br - as) D_{a + r, b + s + 1}$$
            \end{enumerate}
        \end{lemma}
            \begin{proof}
                \begin{enumerate}
                    \item To show that $\divzero$ is a Lie subalgebra of $\der(A)$ with respect to the usual commutator bracket, simply consider the following, where $D, D' \in \divzero$ and $f \in A$ are arbitrary:
                        $$\gamma( [D, D'](f) ) = \gamma( D(D'(f)) - \gamma( D'(D(f)) ) = 0$$
                    which holds per the very definition of $\divzero$ itself.
                    \item Any element $D \in \divzero$ is, of course, an element of $\der(A) \cong A \del_v \oplus A \del_t$, and hence can be written as:
                        $$D := \sum_{(a, b) \in \Z^2} \left( \lambda_{a, b} v^a t^b \del_v + \mu_{a, b} v^a t^b \del_t \right)$$
                    for some $\lambda_{a, b}, \mu_{a, b} \in \bbC$. Consider then the following, where $f \in A$ is arbitrary:
                        $$0 =\gamma(D(f)) = \sum_{(a, b) \in \Z^2} \left( \lambda_{a, b} \gamma(v^r t^s \del_v f) + \mu_{a, b} \gamma(v^a t^b \del_t f) \right)$$
                    Without any loss of generality, we can take $f \in A$ to be a basis element, i.e. $f := v^m t^p$ for some $(m, p) \in \Z^2$. Doing so yields:
                        $$
                            \begin{aligned}
                                0 & = \sum_{(a, b) \in \Z^2} \left( \lambda_{a, b} \gamma(v^a t^b \del_v(v^m t^p)) + \mu_{a, b} \gamma(v^a t^b \del_t(v^m t^p)) \right)
                                \\
                                & = \sum_{(a, b) \in \Z^2} \left( m\lambda_{a, b} \gamma(v^{a + m - 1} t^{b + p}) + p \mu_{a, b} \gamma( v^{a + m} t^{b + p - 1} ) \right)
                                \\
                                & = -\sum_{(a, b) \in \Z^2} \left( m \lambda_{a, b} \delta_{(a + m - 1, b + p), (0, -1)} + p \mu_{a, b} \delta_{(a + m, b + p - 1), (0, -1)} \right)
                                \\
                                & = -\sum_{(a, b) \in \Z^2} \left( m \lambda_{a, b} \delta_{(a + m, b + p), (1, -1)} + p \mu_{a, b} \delta_{(a + m, b + p), (0, 0)} \right)
                                \\
                                & = -\left( m \lambda_{-m + 1, -p - 1} + p \mu_{-m, -p} \right)
                            \end{aligned} 
                        $$
                    for all $(m, p) \in \Z^2$. From this, one sees that:
                        $$D = \sum_{(r, s) \in \Z^2} \lambda_{r, s} D_{r, s} + \lambda_v D_v + \lambda_t D_t$$
                    for some $\lambda_{r, s}, \lambda_v, \lambda_t \in \bbC$, where:
                        $$D_{r, s} := -s v^{-r + 1} t^{-s - 1} \del_v + r v^{-r} t^{-s} \del_t$$
                        $$D_v := -v t^{-1} \del_v$$
                        $$D_t := -\del_t$$
                    These elements are clearly linearly independent, so we are done.
                    \item Next, let us compute the commutation relations satisfied by the basis elements of $\divzero$.
                    \begin{enumerate}
                        \item Since we know that:
                            $$D_v = -vt^{-1} \del_v, D_t = -\del_t$$
                        we can perform the following computation:
                            $$
                                \begin{aligned}
                                    & [D_v, D_t](v^m t^p)
                                    \\
                                    = & v t^{-1} \del_v( \del_t (v^m t^p) ) - \del_t ( v t^{-1} \del_v ( v^m t^p ) )
                                    \\
                                    = & v t^{-1} \del_v( p v^m t^{p - 2} ) - \del_t ( mv^m t^{p - 1} )
                                    \\
                                    = & p m v^m t^{p - 2} - (p - 1) m v^m t^{p - 2}
                                    \\
                                    = & m v^m t^{p - 2}
                                    \\
                                    = & v t^{-2} \del_v( v^m t^p ) 
                                \end{aligned}
                            $$
                        which tells us that:
                            $$[D_v, D_t] = v t^{-2} \del_v = -D_{0, 1}$$
                        \item Next, observe that:
                            $$D_v(v^m t^p) = -m v^m t^{p - 1}$$
                            $$D_{r, s}(v^m t^p) = ( rp - ms ) v^{m - r} t^{p - s - 1}$$
                        which can be easily shown via directly calculating the expressions. From this, we infer that:
                            $$
                                \begin{aligned}
                                    & [D_v, D_{r, s}](v^m t^p)
                                    \\
                                    = & D_v( D_{r, s}(v^m t^p) ) - D_{r, s}( D_v(v^m t^p) )
                                    \\
                                    = & (rp - ms) D_v( v^{m - r} t^{p - s - 1} ) + m D_{r, s}( v^m t^{p - 1} )
                                    \\
                                    = & -(m - r)(rp - ms) v^{m - r} t^{p - s - 2} + (r(p - 1) - ms) m v^{m - r} t^{p - s - 2}
                                    \\
                                    = & r(rp - m(s + 1)) v^{m - r} t^{p - (s + 1) - 1}
                                    \\
                                    = & r D_{r, s + 1}(v^m t^p)
                                \end{aligned}
                            $$
                        and hence:
                            $$[D_v, D_{r, s}] = r D_{r, s + 1}$$
                        \item Likewise, we have that:
                            $$[D_t, D_{r, s}] = s D_{r, s + 1}$$
                        \item Using the same method, we can show that:
                            $$[D_{a, b}, D_{r, s}] = (br - as) D_{a + r, b + s + 1}$$
                    \end{enumerate}
                \end{enumerate}
            \end{proof}
        \begin{corollary}[$\Z^2$-grading on $\gamma$-divergence-zero vector fields] \label{coro: yangian_div_zero_vector_fields_are_graded}
            $\divzero$ is a $\Z^2$-graded Lie subalgebra of the $\Z^2$-graded Lie algebra $\der(A)$ (see remark \ref{remark: gradings_on_derivations} for a description of the standard $\Z^2$-grading on $\der(A)$ coming from the one on $A$). Namely, the grading on $\divzero$ is given by:
                $$\forall (r, s) \in \Z^2 \setminus \{(0, 0)\}: \deg D_{r, s} = (-r, -s - 1)$$
                $$\deg D_v = \deg D_t = (0, -1)$$
            The reason for this choice of grading will become clear after proposition \ref{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}, which asserts that $\divzero \cong \z(\toroidal)^{\star}$ as $\Z^2$-graded vector spaces; recall that the latter has a natural $\Z^2$-grading given by:
                $$\deg K_{r, s} = (r, s)$$
                $$\deg c_v = \deg c_t = 0$$
        \end{corollary}

        \begin{proposition}[$\gamma$-divergence-zero vector fields are graded-dual to toroidal centre] \label{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}
            There is a $\Z^2$-graded vector space isomorphism:
                $$\varphi: \divzero \xrightarrow[]{\cong} \z(\toroidal)^{\star}$$
            determined by:
                $$\varphi(D)( f\bar{d}g ) := \gamma( f D(g) )$$
            for all $D \in \divzero$. This identifies the basis $\{D_{r, s}\}_{(r, s) \in \Z^2} \cup \{D_v, D_t\}$ of $\divzero$ as being $\Z^2$-graded dual to the basis $\{K_{r, s}\}_{(r, s) \in \Z^2} \cup \{c_v, c_t\}$ of $\z(\toroidal)$.
        \end{proposition}
            \begin{proof}
                First of all, let us prove that $\varphi: \divzero \xrightarrow[]{\cong} \z(\toroidal)^{\star}$ as given is graded, and it is enough to check this on the basis elements: we claim that, because:
                    $$\deg D_{r, s} = (-r, -s - 1)$$
                    $$\deg D_v = \deg D_t = (0, 0)$$
                (cf. corollary \ref{coro: yangian_div_zero_vector_fields_are_graded}) and because:
                    $$\deg K_{a, b} = (a, b)$$
                    $$\deg c_v = \deg c_t = (0, 0)$$
                (see example \ref{example: toroidal_lie_algebras_centres}), we ought to have that:
                    $$\varphi(D_{r, s})(K_{a, b}) = \delta_{(a - r, b - s - 1), (-1, -1)}$$
                    $$\varphi(D_v)(c_v) = \varphi(D_t)(c_t) = 1$$
                for $D_{r, s}, D_v, D_t$ to be identified - respectively - as $\Z^2$-graded dual basis elements corresponding to $K_{r, s}, c_v, c_t$; a straightforward dimension argument will then show that $\varphi$ must be a vector space isomorphism. Indeed, we have that:
                    $$
                        \begin{aligned}
                            \varphi(D_{r, s})(K_{a, b}) & = 
                            \begin{cases}
                                \text{$\gamma\left( \frac1b v^{a - 1} t^b D_{r, s}(v) \right)$ if $(a, b) \in \Z \x (\Z \setminus \{0\})$}
                                \\
                                \text{$\gamma\left( -\frac1a v^a t^{-1} \bar{d}t \right)$ if $(a, b) \in (\Z \setminus \{0\}) \x \{0\}$}
                                \\
                                \text{$0$ if $(a, b) = (0, 0)$}
                            \end{cases}
                            \\
                            & = 
                            \begin{cases}
                                \text{$\gamma\left( -\frac{s}{b} v^{a - r} t^{b - s - 1} \right)$ if $(a, b) \in \Z \x (\Z \setminus \{0\})$}
                                \\
                                \text{$\gamma\left( -\frac{r}{a} v^{a - r} t^{-s - 1} \right)$ if $(a, b) \in (\Z \setminus \{0\}) \x \{0\}$}
                                \\
                                \text{$0$ if $(a, b) = (0, 0)$}
                            \end{cases}
                            \\
                            & = \delta_{(a - r, b - s - 1), (-1, -1)}
                        \end{aligned}
                    $$
                as well as:
                    $$\varphi(D_v)(c_v) = \gamma(v^{-1} D_v(v)) = \gamma( -t^{-1} ) = 1$$
                    $$\varphi(D_t)(c_t) = \gamma(t^{-1} D_t(t)) = \gamma( -t^{-1} ) = 1$$
                Since:
                    $$\divzero \cong \bigoplus_{(r, s) \in \Z^2} \bbC D_{r, s} \oplus \bbC D_v \oplus \bbC D_t$$
                    $$\z(\toroidal)^{\star} \cong \bigoplus_{(r, s) \in \Z^2} (\bbC K_{r, s})^* \oplus (\bbC c_v)^* \oplus (\bbC c_t)^*$$
                the computations above are enough to show that:
                    $$\varphi: \divzero \to \z(\toroidal)^{\star}$$
                as given is a vector space isomorphism.
            \end{proof}
        \begin{corollary}[Lie brackets on graded-duals of the toroidal centres] \label{coro: lie_bracket_on_graded_dual_of_toroidal_centres}
            $\z(\toroidal)^{\star}$ is naturally a Lie algebra via the vector space isomorphism $\varphi: \divzero \xrightarrow[]{\cong} \z(\toroidal)^{\star}$.
        \end{corollary}
        \begin{corollary}[Non-degenerate bilinear forms on $\z(\toroidal) \oplus \divzero$ and on $\toroidal \oplus \divzero$] \label{coro: pairing_yangian_div_zero_vector_fields_and_cyclic_1_forms}
            There is a non-degenerate symmetric bilinear form $(-, -)_{\varphi}$ on the vector space $\z(\toroidal) \oplus \divzero$, given by:
                $$(K, D)_{\varphi} := \varphi(D)(K)$$
                $$(K, K')_{\varphi} = (D, D')_{\divzero} := 0$$
            for all $K, K' \in \z(\toroidal), D, D' \in \divzero$.

            This extends to a non-degenerate and symmetric bilinear form $(-, -)_{\toroidal \oplus \divzero}$ on $\toroidal \oplus \divzero$, given by:
                $$
                    \begin{aligned}
                        & ( X + D, Y + D' )_{\toroidal \oplus \divzero}
                        \\
                        := & (X, Y)_{\toroidal} + ( \pi_{\z(\toroidal)}(X), D' )_{\varphi} + ( \pi_{\z(\toroidal)}(Y), D )_{\varphi}
                        \\
                        = & (X, Y)_{\toroidal} + \varphi(D')( \pi_{\z(\toroidal)}(X) ) + \varphi(D)( \pi_{\z(\toroidal)}(Y) )
                    \end{aligned}
                $$
            for all $X, Y \in \toroidal$ and all $D, D' \in \divzero$, where $\pi_{\z(\toroidal)}: \toroidal \to \z(\toroidal)$ denotes the canonical projection. This bilinear form itself extends the bilinear form $(-, -)_{\toroidal}$ on $\toroidal$, and it is related to the bilinear form $(-, -)_{\toroidal \oplus \z(\toroidal)^{\star}}$ from lemma \ref{lemma: extended_toroidal_bilinear_form} by:
                $$(-, -)_{\toroidal \oplus \divzero} = (-, -)_{\toroidal \oplus \z(\toroidal)^{\star}} \circ ( \id_{\toroidal} \oplus \varphi )^{\tensor 2}$$
        \end{corollary}
            \begin{proof}
                This is a direct consequence of lemma \ref{lemma: extended_toroidal_bilinear_form}.
            \end{proof}
        \begin{remark}
            Note that the pairing $(-, -)_{\varphi}$ as in corollary \ref{coro: pairing_yangian_div_zero_vector_fields_and_cyclic_1_forms}, when regarded as an element of $\z(\toroidal) \tensor_{\bbC} \z(\toroidal)^{\star}$, which has a canonical $\Z^2$-grading coming from those on $\z(\toroidal)$ and $\z(\toroidal)^{\star}$, has total degree $-1$ due to the choice of $\Z^2$-grading on $\divzero$ (and hence on $\z(\toroidal)^{\star}$, thanks to proposition \ref{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}) that was made in corollary \ref{coro: yangian_div_zero_vector_fields_are_graded}. Because $(-, -)_{\g_{[2]}}$ is also of total degree $-1$ (by construction), the bilinear form $(-, -)_{\toroidal \oplus \divzero}$ is also of total degree $-1$.
        \end{remark}

    \subsection{Statement of the main theorem and proof outline}
        \begin{lemma}[A $\der(A)$-action on $\toroidal$] \label{lemma: vector_field_action_on_toroidal_lie_algebras} 
            There is a $\der(A)$-module structure on $\toroidal$:
                $$\rho: \der(A) \to \der(\toroidal)$$
            by Lie derivations (cf. definition \ref{def: lie_derivations}), given explicitly on the generators $xf \in \g_{[2]}$ (for any $x \in \g$ and $f \in A$) and $g \bar{d}f \in \z(\toroidal)$ (for any $f, g \in A$) by:
                $$\rho(D)( xf ) := x D(f)$$
                $$\rho( g\bar{d}f ) := D(g) \bar{d}f + g \bar{d}(D(f))$$
            for all $D \in \der(A)$.
        \end{lemma}
            \begin{proof}
                The first assertion is clear from the discussion in example \ref{example: derivations_on_current_algebras}.
            
                To prove the second assertion, recall from example \ref{example: lie_derivatives} that there is a Lie algebra action by Lie derivations:
                    $$L: \der(A) \to \der(\Omega^1_{A/\bbC})$$
                given by Lie derivatives, i.e.:
                    $$L(D)( g df ) := D(g) df + g d(D(f))$$
                for all $D \in \der(A)$ and all $f, g \in A$. Therefore, to show that it suffices to only show that $d(A)$ is a $\der(A)$-submodule of $\Omega^1_{A/\bbC}$ in order for us to show that the vector space $\z(\toroidal) \cong \Omega^1_{A/\bbC}/d(A)$ is a $\der(A)$-module. To this end, simply consider the following, where $D \in \der(A)$ and $f \in A$ are arbitrarily chosen:
                    $$L(D)( df ) = d( D(f) )$$
                Since $D(f) \in A$, the above shows that:
                    $$L(D)( df ) \in d(A)$$
                and hence we have what we need.

                We have therefore constructed a Lie algebra action:
                    $$\rho: \der(A) \to \gl(\toroidal)$$
                given by:
                    $$\rho(D)( xf ) := x D(f)$$
                    $$\rho( g\bar{d}f ) := D(g) \bar{d}f + g \bar{d}(D(f))$$
                for all $x \in \g$ and all $f, g \in A$, so it remains to check that the codomain of $\rho$ is actually $\der(\toroidal)$, i.e. for every $D \in \der(A)$, the operator:
                    $$\rho(D) \in \gl(\toroidal)$$
                is a Lie derivation in the sense of definition \ref{def: lie_derivations} (for which we shall have to regard $\toroidal$ as a module over itself via the adjoint action). For this, pick arbitrary elements $X, Y \in \g_{[2]}, K, K' \in \z(\toroidal)$ - and without loss of generality, we can take $X := xf$ and $Y := yg$ for some $x, y \in \g$ and some $f, g \in A$ - along with an element $D \in \der(A)$ and then consider the following:
                    $$
                        \begin{aligned}
                            & \rho(D)( [X + K, Y + K']_{\toroidal} )
                            \\
                            = & \rho([x, y]_{\g} fg) + (x, y)_{\g} \rho(D)(g \bar{d}f)
                            \\
                            = & [x, y]_{\g} D(fg) + (x, y)_{\g} ( D(g) \bar{d}f + g \bar{d}(D(f)) )
                            \\
                            = & [x, y]_{\g} ( f D(g) + D(f) g ) + (x, y)_{\g} ( D(g) \bar{d}f + g \bar{d}(D(f)) )
                            \\
                            = & [ xf, y D(g) ]_{\toroidal} + [ x D(f), yg ]_{\toroidal}
                            \\
                            = &  [ xf, \rho(yg) ]_{\toroidal} + [ \rho(xf), yg ]_{\toroidal}
                            \\
                            = & [ X, \rho(Y) ]_{\toroidal} + [ \rho(X), Y ]_{\toroidal}
                            \\
                            = & [ X + K', \rho(Y + K') ]_{\toroidal} + [ \rho(X + K), Y + K' ]_{\toroidal}
                        \end{aligned}
                    $$
                where the last equality is true because $K, K'$ as well as $\rho(K), \rho(K')$ are central in $\toroidal$. From this, it is clear that the Leibniz rule is satisfied, so we are done.
            \end{proof}
        \begin{remark}
            Lemma \ref{lemma: vector_field_action_on_toroidal_lie_algebras} remains true when we replace our $A := \bbC[v^{\pm 1}, t^{\pm 1}]$ by \textit{any} commutative $\bbC$-algebra.
        \end{remark}
        \begin{corollary}[A $\divzero$-action on $\toroidal$] \label{coro: a_fixed_yangian_div_zero_vector_field_action} 
            Because $\divzero$ is a Lie subalgebra of $\der(A)$ (cf. lemma \ref{lemma: yangian_div_zero_vector_fields_basic_properties}), the $\der(A)$-action $\rho: \der(A) \to \der(\toroidal)$ as in lemma \ref{lemma: vector_field_action_on_toroidal_lie_algebras} above defines an action:
                $$\rho: \divzero \to \der(\toroidal)$$
            of $\divzero$ on $\toroidal$ by the same formulae, and hence via Lie derivations, as well.
        \end{corollary}
            
        Corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action} allows us to form the semi-direct product:
            $$\toroidal \rtimes \divzero$$
        (cf. example \ref{example: lie_algebra_semi_direct_products}), which prompts the content of our main result concerning $\gamma$-extended toroidal Lie algebras. The statement is as follows:
        \begin{theorem} \label{theorem: yangian_extended_toroidal_lie_algebras_main_theorem}
            A Lie algebra $(\extendedtoroidal, [-, -]_{\extendedtoroidal})$ is a \textbf{$\gamma$-extended toroidal Lie algebra} in the sense of definition \ref{def: yangian_extended_toroidal_lie_algebras} if and only if there exists a Lie algebra isomorphism:
                $$\nu: \toroidal \rtimes^{\sigma} \divzero \xrightarrow[]{\cong} \extendedtoroidal$$
            for some Lie $2$-cocycle\footnote{See definitions \ref{def: twisted_semi_direct_products} and \ref{def: lie_cocycles_and_coboundaries}.} $\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$ such that the following \textbf{$\gamma$-invariance} property is satisfied:
                $$\left( \sigma(D, D'), D'' \right)_{\toroidal \oplus \divzero} = \left( D, \sigma(D', D'') \right)_{\toroidal \oplus \divzero}$$
                
            Furthermore, if $\extendedtoroidal$ is a $\gamma$-extended toroidal Lie algebra and:
                $$\mu: \extendedtoroidal \xrightarrow[]{\cong} \toroidal \oplus \z(\toroidal)^{\star}$$
            is a vector space isomorphism as in definition \ref{def: yangian_extended_toroidal_lie_algebras}, then:
            \begin{enumerate}
                \item a particular Lie algebra isomorphism $\nu: \toroidal \rtimes^{\sigma} \divzero \xrightarrow[]{\cong} \extendedtoroidal$ will be given by:
                    $$\nu = \mu^{-1} \circ (\id_{\toroidal} \oplus \varphi)$$
                with $\varphi$ as in proposition \ref{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}, and
                \item $\mu^{-1}(\toroidal) \subset \extendedtoroidal$ will be a Lie algebra ideal, and
                \item the action of $\divzero$ on $\toroidal$ is indepdendent of $\sigma$ and given by $\rho: \divzero \to \der(\toroidal)$ (cf. corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}).
            \end{enumerate}
        \end{theorem}
        \begin{remark}
            The last consequential statement in theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem} can be rephrased equivalently as follows: if $\extendedtoroidal$ is a $\gamma$-extended toroidal Lie algebra there is an isomorphism of Lie algebras:
                $$\extendedtoroidal/\toroidal \xrightarrow[]{\cong} \divzero$$
            that is independent of the corresponding $\gamma$-invariant $2$-cocycle $\sigma$ (such that $\toroidal \rtimes^{\sigma} \divzero \cong \extendedtoroidal$).
        \end{remark}
        
        \begin{convention}[The underlying vector space of $\gamma$-extended toroidal Lie algebras]
            Henceforth, we will be writing:
                $$\extendedtoroidal := \toroidal \oplus \divzero$$
            The non-degenerate bilinear form on this vector space that was constructed in corollary \ref{coro: pairing_yangian_div_zero_vector_fields_and_cyclic_1_forms} shall therefore be denoted by:
                $$(-, -)_{\extendedtoroidal}$$
            and as a small abuse of notation, for any isomorphism of vector spaces:
                $$\mu: \extendedtoroidal \xrightarrow[]{\cong} \fraky$$
            we shall be using the same notation to speak of the bilinear form $\mu \circ (-, -)_{\extendedtoroidal} \circ (\mu^{-1})^{\tensor 2}$ on $\fraky$. 
        \end{convention}

        \begin{proof}[Outline of the proof of theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem}]
            Our proof of theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem} shall be split into two main steps, namely the proofs of the \say{if} and the \say{only if} implications therein, respectively.
            \begin{itemize}
                \item Let us discuss firstly the proof of the \say{if} direction, the content of subsection \ref{subsection: which_twisted_semi_direct_products_are_yangian_extended_toroidal_lie_algebras}.
                \begin{enumerate}
                    \item After some trivial reduction, one shall see that in fact, the most non-trivial thing to prove is that the semi-direct product:
                        $$\toroidal \rtimes \divzero$$
                    (well-defined now, thanks to corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}) is an instance of a $\gamma$-extended toroidal Lie algebra, and this will be achieved through lemma \ref{lemma: semi_direct_product_of_toroidal_lie_algebras_with_div_zero_vector_fields_are_yangian_extended_toroidal_lie_algebras}. \item Using this, we will then prove in proposition \ref{proposition: twisted_semi_direct_products_are_yangian_extended_toroidal_lie_algebras} that a given Lie $2$-cocycle:
                        $$\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$$
                    must sastisfy:
                        $$( \sigma(D, D'), D'' )_{\extendedtoroidal} = ( D, \sigma(D', D'') )_{\extendedtoroidal}$$
                    so that the correpsonding twisted semi-direct product:
                        $$\toroidal \rtimes^{\sigma} \divzero$$
                    would a $\gamma$-extended toroidal Lie algebra. This will conclude the proof.
                \end{enumerate}
                \item In the \say{only if} direction, the proof - which shall occupy subsection \ref{subsection: yangian_extended_toroidal_lie_algebras_are_twisted_semi_direct_products} and culminate in proposition \ref{prop: yangian_extended_toroidal_lie_algebras_are_twisted_semi_direct_products} - is more involved and somehow much less \say{routine}. Broadly, our strategy is to make use of proposition \ref{prop: twisted_semi_direct_product_criterion}, which requires two inputs:
                \begin{enumerate}
                    \item Firstly, given any $\gamma$-extended toroidal Lie algebra structure $[-, -]_{\extendedtoroidal}$ on $\extendedtoroidal$, the $\divzero$-action $\rho: \divzero \to \der(\toroidal)$ constructed in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action} shall then satisfy:
                        $$[D, X]_{\extendedtoroidal} = \rho(D)(X)$$
                    for all $D \in \divzero$ and all $X \in \toroidal$. We will be verifying this requirement via lemmas \ref{lemma: derivation_action_on_multiloop_algebras}, \ref{lemma: derivation_action_on_toroidal_centres}, and \ref{lemma: yangian_extended_toroidal_lie_algebras_are_extensions} in that sequence.
                    \item Secondly, in equipping the vector space $\extendedtoroidal := \toroidal \oplus \divzero$ with the Lie bracket $[-, -]_{\extendedtoroidal}$ as above, one shall obtain a Lie algebra extension:
                        $$0 \to \toroidal \to \extendedtoroidal \to \divzero \to 0$$
                    This will be checked in lemma \ref{lemma: yangian_extended_toroidal_lie_algebras_are_extensions}.
                \end{enumerate}
                Let us also note that, in verifying that these requirements are satisfied, we will be relying heavily on the fact that $(-, -)_{\extendedtoroidal}$ is invariant with respect to $[-, -]_{\extendedtoroidal}$.
            \end{itemize}
        \end{proof}

    \subsection{Which twisted semi-direct products are \texorpdfstring{$\gamma$}{}-extended toroidal Lie algebras ?} \label{subsection: which_twisted_semi_direct_products_are_yangian_extended_toroidal_lie_algebras}
        In this subsection, we prove the \say{if} direction of theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem}. To this end, let us firstly fix a twisted semi-direct product:
            $$\toroidal \rtimes^{\sigma} \divzero$$
        (with corresponding Lie $2$-cocycle $\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$) such that:
            $$[D, X]_{\sigma} = \rho(D) \cdot X$$
        (for all $X \in \toroidal$ and $D \in \divzero$, and with $\rho: \divzero \to \der(\toroidal)$ being as in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}). Let us also denote the Lie bracket on this twisted semi-direct product by:
            $$[-, -]_{\sigma}$$

        \begin{remark}[What do we need to show ?] \label{remark: yangian_extended_toroidal_lie_algebras_main_theorem_if_direction_proof_outline}
            Obviously, there is a vector space isomorphism between $\toroidal \rtimes^{\sigma} \divzero$ and $\toroidal \oplus \z(\toroidal)^{\star}$, namely:
                $$\id_{\toroidal} \oplus \varphi: \toroidal \rtimes^{\sigma} \divzero \to \toroidal \oplus \z(\toroidal)^{\star}$$
            with $\varphi: \divzero \to \z(\toroidal)$ as in proposition \ref{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}. It is also clear (per definition \ref{def: twisted_semi_direct_products}), that the canonical inclusion of vector spaces $\toroidal \subset \toroidal \rtimes^{\sigma} \divzero$ is a Lie algebra monomorphism. As such, the only thing to prove is that the non-degenerate symmetric bilinear form given by:
                $$(-, -)_{\extendedtoroidal} \circ (\id_{\toroidal} \oplus \varphi)^{\tensor 2}$$
            is invariant with respect to the Lie bracket $[-, -]_{\sigma}$.

            To prove that $(-, -)_{\extendedtoroidal}$ is invariant with respect to $[-, -]_{\sigma}$, one must check that for all:
                $$X, Y, Z \in \extendedtoroidal$$
            the following identity holds:
                $$( [X, Y]_{\sigma}, Z )_{\extendedtoroidal} = ( X, [Y, Z]_{\sigma} )_{\extendedtoroidal}$$
            Because of how the bilinear form $(-, -)_{\extendedtoroidal}$ is constructed (cf. lemma \ref{lemma: extended_toroidal_bilinear_form} and corollary \ref{coro: pairing_yangian_div_zero_vector_fields_and_cyclic_1_forms}), there are $10$ separate cases to check, namely wherein $(X, Y, Z)$ - as an \textit{ordered} tuple - is an element of the following sets, respectively:
                $$\g_{[2]} \x \z(\toroidal) \x \g_{[2]}$$
                $$\g_{[2]} \x \z(\toroidal) \x \z(\toroidal)$$
                $$\g_{[2]} \x \z(\toroidal) \x \divzero$$
                $$\g_{[2]} \x \divzero \x \z(\toroidal)$$
                $$\g_{[2]} \x \divzero \x \divzero$$
                $$\z(\toroidal) \x \divzero \x \z(\toroidal)$$
                
                $$\g_{[2]} \x \g_{[2]} \x \g_{[2]}$$
                $$\g_{[2]} \x \g_{[2]} \x \divzero$$
                $$\divzero \x \divzero \x \z(\toroidal)$$
                $$\divzero \x \divzero \x \divzero$$
            However, the only the last four cases are non-trivial, which simplifies our task significantly. Furthermore, even though the last case is not trivial for a general $\sigma$. it is trivial when $\sigma = 0$, since $(\divzero, \divzero)_{\extendedtoroidal} = 0$; therefore, we will deal with the case where $\sigma = 0$ first.
        \end{remark}

        In accordance with the notations above, let us write $[-, -]_0$ for the bracket on the semi-direct product $\toroidal \rtimes \divzero$.
        \begin{lemma} \label{lemma: semi_direct_product_of_toroidal_lie_algebras_with_div_zero_vector_fields_are_yangian_extended_toroidal_lie_algebras}
            Let $\divzero$ act on $\toroidal$ via $\rho$ as in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}. The semi-direct product $\toroidal \rtimes \divzero$ - corresponding to the $2$-cocycle:
                $$0 \in Z^2_{\Lie}(\divzero, \z(\toroidal))$$
            - is a $\gamma$-extended toroidal Lie algebra in the sense of definition \ref{def: yangian_extended_toroidal_lie_algebras}.
        \end{lemma}
            \begin{proof}
                Again, as stated in remark \ref{remark: yangian_extended_toroidal_lie_algebras_main_theorem_if_direction_proof_outline}, one must check that for all:
                    $$X, Y, Z \in \extendedtoroidal$$
                the following identity holds:
                    $$( [X, Y]_0, Z )_{\extendedtoroidal} = ( X, [Y, Z]_0 )_{\extendedtoroidal}$$
                and this can be done by verifying the following cases. Recall also, from example \ref{example: lie_algebra_semi_direct_products}, that the semi-direct product Lie bracket $[-, -]_0$ is as follows for all $X, Y \in \toroidal$ and all $D, D' \in \divzero$:
                    $$[X + D, Y + D']_0 := [X, Y]_{\toroidal} + \rho(D)(Y) - \rho(D')(X) + [D, D']$$
                \begin{enumerate}
                    \item Assume firstly that $X, Y, Z \in \g_{[2]}$. Because we have that:
                        $$(\toroidal, \toroidal)_{\extendedtoroidal} := (\toroidal, \toroidal)_{\toroidal}$$
                    per the construction of $(-, -)_{\extendedtoroidal}$ (cf. lemma \ref{lemma: extended_toroidal_bilinear_form} and corollary \ref{coro: pairing_yangian_div_zero_vector_fields_and_cyclic_1_forms}) and because $(-, -)_{\toroidal}$ is necessarily invariant with respect to $[-, -]_{\toroidal}$, we have that:
                        $$( [X, Y]_0, Z )_{\extendedtoroidal} = ( [X, Y]_{\toroidal}, Z )_{\toroidal} = ( X, [Y, Z]_{\toroidal} )_{\toroidal} = ( X, [Y, Z]_0 )_{\extendedtoroidal}$$
                    which gives the desired invariance property of $(-, -)_{\extendedtoroidal}$ on $X, Y, Z \in \g_{[2]}$.
                    \item Next, consider $X, Y \in \g_{[2]}$ but $Z \in \divzero$. Without any loss of generality, suppose that:
                        $$X := xf, Y := yg$$
                    for some $x, y \in \g$ and some $f, g \in A$. Due to the fact that $(\g_{[2]}, \divzero)_{\extendedtoroidal} = 0$ (cf. lemma \ref{lemma: extended_toroidal_bilinear_form} and corollary \ref{coro: pairing_yangian_div_zero_vector_fields_and_cyclic_1_forms}), we shall have that:
                        $$( [X, Y]_0, Z )_{\extendedtoroidal} = ( [X, Y]_{\toroidal}, Z )_{\toroidal} = (x, y)_{\g} ( g \bar{d}f, Z )_{\extendedtoroidal}$$
                    and likewise, that:
                        $$
                            \begin{aligned}
                                & ( X, [Y, Z]_0 )_{\extendedtoroidal}
                                \\
                                = & ( X, [Y, Z]_{\toroidal} )_{\extendedtoroidal}
                                \\
                                = & -( xf, \rho(Z)(yg))_{\extendedtoroidal}
                                \\
                                = & -(x, y)_{\g} (f, Z(g))_{\extendedtoroidal}
                                \\
                                = & -(x, y)_{\g} \gamma(f Z(g))
                                \\
                                = & -(x, y)_{\g} (f \bar{d}g, Z)_{\extendedtoroidal}
                            \end{aligned}
                        $$
                    Now, since $-f \bar{d}g = g\bar{d}f$, per the fact that $\z(\toroidal) \cong \bar{\Omega}^1_{A/\bbC}$ (cf. example \ref{example: affine_lie_algebras_centres}), we are done. 
                    \item Finally, consider $X, Y \in \divzero$ and $Z \in \z(\toroidal)$. Without any loss of generality, assume that:
                        $$Z := g\bar{d}f$$
                    for some $f, g \in A$. In this case, we have:
                        $$( [X, Y]_0, Z )_{\extendedtoroidal} = ( [X, Y], g\bar{d}f )_{\extendedtoroidal} = ( XY, g\bar{d}f )_{\extendedtoroidal} - ( YX, g\bar{d}f )_{\extendedtoroidal}$$
                    Using the fact that $b\bar{d}a = -a\bar{d}b$ for all $a, b \in A$, we can furthermore rewrite the above into:
                        $$
                            \begin{aligned}
                                & ( [X, Y]_0, Z )_{\extendedtoroidal}
                                \\
                                = & ( XY, g\bar{d}f )_{\extendedtoroidal} - ( YX, g\bar{d}f )_{\extendedtoroidal}
                                \\
                                = & ( XY, g\bar{d}f )_{\extendedtoroidal} + ( YX, f\bar{d}g )_{\extendedtoroidal}
                                \\
                                = & \gamma( g X(Y(f)) + f Y(X(g)) )
                                \\
                                = & ( X, g \bar{d}(Y(f)) )_{\extendedtoroidal} + ( Y, f \bar{d}(X(g) ) )_{\extendedtoroidal}
                            \end{aligned}
                        $$
                    At the same time, we have that:
                        $$
                            \begin{aligned}
                                & ( X, [Y, Z]_0 )_{\extendedtoroidal}
                                \\
                                = & ( X, \rho(Y)(g \bar{d}f) )_{\extendedtoroidal}
                                \\
                                = & ( X, Y(g) \bar{d}f + g \bar{d}(Y(f)) )_{\extendedtoroidal}
                            \end{aligned}
                        $$
                    It therefore remains to show that:
                        $$( Y, f \bar{d}(X(g) ) )_{\extendedtoroidal} = ( X, Y(g) \bar{d}f )_{\extendedtoroidal}$$
                    For this, consider the following:
                        $$( Y, f \bar{d}(X(g) ) )_{\extendedtoroidal} = \gamma( f Y(X(g)) )$$
                    while at the same time, we have that:
                        $$( X, Y(g) \bar{d}f )_{\extendedtoroidal} = \gamma( Y(g) X(f) ) = ( Y, X(f) \bar{d}g )_{\extendedtoroidal} = -(Y, g \bar{d}(X(f)) )_{\extendedtoroidal} = -\gamma( g Y(X(f)) )$$
                    From these two observations, we shall have that:
                        $$( Y, f \bar{d}(X(g) ) )_{\extendedtoroidal} - ( X, Y(g) \bar{d}f )_{\extendedtoroidal} = \gamma( f Y(X(g)) + g Y(X(f)) ) = ( YX, f \bar{d}g + g \bar{d}f )_{\extendedtoroidal} = 0$$
                    where the last equality holds because $f \bar{d}g + g \bar{d}f = 0$. We have therefore shown that $( Y, f \bar{d}(X(g) ) )_{\extendedtoroidal} = ( X, Y(g) \bar{d}f )_{\extendedtoroidal}$, as needed, so we are now done.
                \end{enumerate}
            \end{proof}
            
        \begin{proposition}[A $\gamma$-invariance criterion for toroidal $2$-cocycles] \label{proposition: twisted_semi_direct_products_are_yangian_extended_toroidal_lie_algebras}
            Consider a Lie $2$-cocycle $\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$. The corresponding twisted semi-direct product:
                $$\toroidal \rtimes^{\sigma} \divzero$$
            will then be a $\gamma$-extended toroidal Lie algebra if:
                $$(\sigma(D, D'), D'')_{\extendedtoroidal} = (D, \sigma(D', D''))_{\extendedtoroidal}$$
            for all $D, D', D'' \in \divzero$.
        \end{proposition}
            \begin{proof}
                Pick arbitrary elements $D, D', D'' \in \divzero$ and then consider the following:
                    $$
                        \begin{aligned}
                            ([D', D'']_{\sigma}, D'')_{\extendedtoroidal} & = ([D, D']_0 + \sigma(D, D'))_{\extendedtoroidal}
                            \\
                            & = ([D, D']_0, D'')_{\extendedtoroidal} + (\sigma(D, D'), D'')_{\extendedtoroidal}
                            \\
                            & = (D, [D', D'']_0)_{\extendedtoroidal} + (\sigma(D, D'), D'')_{\extendedtoroidal}
                            \\
                            & = (D, [D', D'']_0)_{\extendedtoroidal} + (\sigma(D, D'), D'')_{\extendedtoroidal}
                        \end{aligned}
                    $$
                where the last equality is because $\sigma(D, D') \in \z(\toroidal)$. Similarly, we have that:
                    $$(D', [D'', D'']_{\sigma})_{\extendedtoroidal} = ([D, D']_0, D'')_{\extendedtoroidal} + (D, \sigma(D', D''))_{\extendedtoroidal}$$
                As lemma \ref{lemma: semi_direct_product_of_toroidal_lie_algebras_with_div_zero_vector_fields_are_yangian_extended_toroidal_lie_algebras} shows, the semi-direct product $\toroidal \rtimes \divzero$ is a $\gamma$-extended toroidal Lie algebra, so we have that:
                    $$(D, [D', D'']_0)_{\extendedtoroidal} = ([D, D']_0, D'')_{\extendedtoroidal}$$
                We have also assumed:
                    $$(\sigma(D, D'), D'')_{\extendedtoroidal} = (D, \sigma(D', D''))_{\extendedtoroidal}$$
                Together, these two facts imply that:
                    $$([D', D'']_{\sigma}, D'')_{\extendedtoroidal} = (D', [D'', D'']_{\sigma})_{\extendedtoroidal}$$
                which is precisely what we need so we are done.
            \end{proof}

        We have thus proven the \say{if} implication in theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem}.

    \subsection{\texorpdfstring{$\gamma$}{}-extended toroidal Lie algebras are twisted semi-direct products} \label{subsection: yangian_extended_toroidal_lie_algebras_are_twisted_semi_direct_products}
        Let us fix a Lie bracket:
            $$[-, -]_{\extendedtoroidal}: \bigwedge^2 \extendedtoroidal \to \extendedtoroidal$$
        on the vector space $\extendedtoroidal := \toroidal \oplus \divzero$. Since we are now proving the \say{only if} direction of theorem \ref{theorem: yangian_extended_toroidal_lie_algebras_main_theorem}, let us assume that $(\extendedtoroidal, [-, -]_{\extendedtoroidal})$ is a $\gamma$-extended toroidal Lie algebra. In particular, let us recall from definition \ref{def: yangian_extended_toroidal_lie_algebras} that the bilinear form:
            $$(-, -)_{\extendedtoroidal}$$
        is invariant with respect to $[-, -]_{\extendedtoroidal}$.

        \begin{lemma}[$\divzero$ acts on $\g_{[2]}$ by derivations] \label{lemma: derivation_action_on_multiloop_algebras}
            For any $D \in \divzero$ and any $x \in \g, f \in A$, we have that:
                $$[D, xf]_{\extendedtoroidal} = \rho(D)(xf) + K( D, xf ) = x D(f) + K( D, xf )$$
            for some yet-unknown $K( D, xf ) \in \z(\toroidal)$ and with $\rho: \divzero \to \der(\toroidal)$ as in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}. As such, we have that:
                $$[\divzero, \g_{[2]}]_{\extendedtoroidal} \subseteq \g_{[2]} \oplus \z(\toroidal)$$
            as of now\footnote{In lemma \ref{lemma: no_polynomial_terms_for_derivation_action_on_multiloop_algebras}, it will be shown that in fact, the $\z(\toroidal)$-summand $K( D, xf )$ vanishes.}.
        \end{lemma}
            \begin{proof}
                Consider firstly the following, for any $D \in \divzero$ and any $x, y \in \g, f, g \in A$:
                    $$( [D, xf]_{\extendedtoroidal}, yg )_{\extendedtoroidal} = ( D, [xy, fg]_{\toroidal} )_{\extendedtoroidal} = (x, y)_{\g} ( D, g\bar{d}f )_{\extendedtoroidal} = (x, y)_{\g} \gamma( g D(f) )$$
                At the same time, we have that:
                    $$( x D(f), yg )_{\extendedtoroidal} = (x, y)_{\g} \gamma( g D(f) )$$
                Clearly, then, we have that:
                    $$( [D, xf]_{\extendedtoroidal}, yg )_{\extendedtoroidal} = ( x D(f), yg )_{\extendedtoroidal}$$
                Since $yg \in \g_{[2]}$ is arbitrary and since:
                    $$(\z(\toroidal), \g_{[2]})_{\extendedtoroidal} = (\divzero, \g_{[2]})_{\extendedtoroidal} = 0$$
                per the construction of $(-, -)_{\extendedtoroidal}$, the above implies via the non-degeneracy of $(-, -)_{\extendedtoroidal}$ that there exists some $K(D, xf) \in \z(\toroidal)$ and some $\xi(D, xf) \in \divzero$ such that:
                    $$[D, xf]_{\extendedtoroidal} = x D(f) + K(D, xf) + \xi(D, xf) = \rho(D)(xf) + K(D, xf) + \xi(D, xf)$$
                with $\rho: \divzero \to \der(\toroidal)$ as in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}.

                We claim now that we actually also have that:
                    $$\xi(D, xf) = 0$$
                for all $D \in \divzero$ and all $x \in \g, f \in A$. To see why this is true, pick an arbitrary element $K \in \z(\toroidal)$ and then consider the following, which holds once again thanks to the invariance of $(-, -)_{\extendedtoroidal}$ and also, due to the fact that $(\toroidal, \toroidal)_{\extendedtoroidal} = (\toroidal, \toroidal)_{\toroidal}$ per the construction of $(-, -)_{\extendedtoroidal}$:
                    $$0 = ( D, [xf, K]_{\toroidal} ) = ( [D, xf]_{\extendedtoroidal}, K )_{\extendedtoroidal} = ( \xi(D, f), K )$$
                Via non-degeneracy again, and because $K$ was chosen arbitrarily, we have that:
                    $$\xi(D, f) = 0$$
                necessarily.

                In conclusion, we have shown that:
                    $$[D, xf]_{\extendedtoroidal} = x D(f) + K(D, xf)$$
                for all $D \in \divzero$ and all $x \in \g, f \in A$, and with $K(D, xf) \in \z(\toroidal)$ not yet determined.
            \end{proof}

        \begin{lemma}[$\divzero$ acts on $\z(\toroidal)$ by Lie derivatives] \label{lemma: derivation_action_on_toroidal_centres}
            One has that\footnote{We will be referring to this fact as $\divzero$ (and in fact, $\der(A)$ as well) acting on $\z(\toroidal)$ via Lie derivatives.}:
                $$[D, K]_{\extendedtoroidal} = \rho(D)(K)$$
            for all $D \in \divzero$ and all $K \in \z(\toroidal)$, and with $\rho: \divzero \to \der(\toroidal)$ being the action of $\divzero$ on $\toroidal$ as in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}. In particular, this means that:
                $$[\divzero, \z(\toroidal)]_{\extendedtoroidal} \subseteq \z(\toroidal)$$
        \end{lemma}
            \begin{proof}
                Let $f, g \in A$. Since elements of the form $f \bar{d}g$ span $\z(\toroidal)$ as a vector space (cf. theorem \ref{theorem: kassel_realisation}), it shall suffice to prove that:
                    $$[D, g \bar{d}f]_{\extendedtoroidal} = \rho(D)( g\bar{d}f ) = D(g) \bar{d}f + g \bar{d}(D(f))$$
                for an arbitrary $D \in \divzero$. To this end, let us firstly recall from theorem \ref{theorem: kassel_realisation} that for any $h, h \in \g$ and any $f, g \in A$, one has that:
                    $$[h f, h' g]_{\toroidal} = [h, h']_{\g} fg + (h, h')_{\g} g \bar{d}f$$
                From this, one infers that:
                    $$[D, g \bar{d}f]_{\extendedtoroidal} = [ D, [hf, h' g]_{\toroidal} ]_{\extendedtoroidal}$$
                for any choices of $h, h \in \h$ - which gives $[h, h']_{\g} = 0$, since the Cartan subalgebra $\h \subseteq \g$ is abelian (cf. subsection \ref{subsection: finite_dimensional_simple_lie_algebras}) - such that $(h, h')_{\g} = 1$. Then, by exploiting the Jacobi identity, we shall get the following equalities for all $D \in \divzero$:
                    $$
                        \begin{aligned}
                            & [D, g \bar{d}f]_{\extendedtoroidal}
                            \\
                            = & [ D, [h f, h' g]_{\toroidal} ]_{\extendedtoroidal}
                            \\
                            = & [ h f, [D, h' g]_{\extendedtoroidal} ]_{\toroidal} + [ [D, h f]_{\extendedtoroidal}, h' g ]_{\toroidal}
                            \\
                            = & [ h f, h' D( g ) ]_{\toroidal} + [ h D( f ), h' g ]_{\toroidal}
                            \\
                            = & D(g) \bar{d}f + g \bar{d}(D(f))
                            \\
                            = & \rho(D)( g \bar{d}f )
                        \end{aligned}
                    $$
                which is precisely as we wanted, so we are done. 
            \end{proof}
        \begin{corollary}[Toroidal Lie algebras are ideals] \label{coro: toroidal_lie_algebras_are_ideals}
            With respect to the bracket $[-, -]_{\extendedtoroidal}$, the vector subspace $\toroidal$ is actually a Lie ideal of $\extendedtoroidal$.
        \end{corollary}

        Finally, let us investigate how the brackets of the form:
            $$[D, D']_{\extendedtoroidal}$$
        are given, for all $D, D' \in \divzero$. Because we would like to show that:
            $$\extendedtoroidal \cong \toroidal \rtimes^{\sigma} \divzero$$
        we shall need to show that there exists some $\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$ such that:
            $$[D, D']_{\extendedtoroidal} = [D, D'] + \sigma(D, D')$$
        where $[D, D'] := DD' - D'D$ is the usual commutator Lie bracket (cf. definition \ref{def: twisted_semi_direct_products}). This shall involve showing, firstly that the $\divzero$-component of any bracket of the form $[D, D']_{\extendedtoroidal}$ is necessarily $[D, D']$ and secondly, that $[D, D']_{\extendedtoroidal} \in \divzero \oplus \z(\toroidal)$ for all $D, D' \in \divzero$.
        \begin{lemma}[$\gamma$-extended toroidal Lie algebras are extensions] \label{lemma: yangian_extended_toroidal_lie_algebras_are_extensions}
            The canonical projection of vector spaces:
                $$\pi: \extendedtoroidal \to \divzero$$
            is a Lie algebra homomorphism. Since $\toroidal \subset \extendedtoroidal$ is a Lie subalgebra by definition (cf. definition \ref{def: yangian_extended_toroidal_lie_algebras}), the Lie bracket $[-, -]_{\extendedtoroidal}$ thus necessarily arises as an extension:
                $$0 \to \toroidal \to \extendedtoroidal \xrightarrow[]{\pi} \divzero \to 0$$
        \end{lemma}
            \begin{proof}
                Fix arbitrary elements $D, D' \in \divzero$ and suppose that:
                    $$[D, D']_{\extendedtoroidal} = X(D, D') + \xi(D, D')$$
                for some $X(D, D') \in \toroidal$ and some $\xi(D, D') \in \divzero$. Next, pick arbitrary elements $f, g \in A$, and then consider the following, which holds thanks to the fact that $(\toroidal, \toroidal)_{\extendedtoroidal} = (\toroidal, \toroidal)_{\toroidal}$ (note that $g \bar{d}f \in \toroidal$ is central):
                    $$( [D, D']_{\extendedtoroidal}, g \bar{d}f )_{\extendedtoroidal} = ( \xi(D, D'), g \bar{d}f )_{\extendedtoroidal}$$
                At the same time, by the invariance of $(-, -)_{\extendedtoroidal}$ with respect to $[-, -]_{\extendedtoroidal}$, we have that:
                    $$
                        \begin{aligned}
                            & ( [D, D']_{\extendedtoroidal}, g \bar{d}f )_{\extendedtoroidal}
                            \\
                            = & ( D, [D', g \bar{d}f]_{\extendedtoroidal} )_{\extendedtoroidal}
                            \\
                            = & ( D, D'(g) \bar{d}f + g \bar{d}(D(f)) )_{\extendedtoroidal}
                            \\
                            = & \gamma( D'(g) D(f) ) + \gamma( g D(D'(f)) )
                            \\
                            = & ( D', D(f) \bar{d}g )_{\extendedtoroidal} + \gamma( g D(D'(f)) )
                        \end{aligned}
                    $$
                Now, using the fact that $b\bar{d}a = -a \bar{d}b$ for all $a, b \in A$, one obtains that:
                    $$( D', D(f) \bar{d}g )_{\extendedtoroidal} = -( D', g \bar{d}(D(f)) )_{\extendedtoroidal} = -\gamma( g D'(D(f)) )$$
                and hence:
                    $$( [D, D']_{\extendedtoroidal}, g \bar{d}f )_{\extendedtoroidal} = \gamma( -g D'(D(f)) + g D(D'(f)) ) = \gamma( g[D, D'](f) ) = ([D, D'], g\bar{d}f)_{\extendedtoroidal}$$
                In turn, this implies that:
                    $$( \xi(D, D'), g \bar{d}f )_{\extendedtoroidal} = ([D, D'], g\bar{d}f)_{\extendedtoroidal}$$
                Via the non-degeneracy of the bilinear form $(-, -)_{\extendedtoroidal}$ and the arbitarity of our choices of $f, g \in A$, we thus get that:
                    $$\xi(D, D') = [D, D']$$
                The lemma follows suite.
            \end{proof}
        It now remains to show that the brackets of the form $[D, D']_{\extendedtoroidal}$ (for any $D, D' \in \divzero$) have no $\g_{[2]}$-summands.
        \begin{proposition}[Appearance of $2$-cocycles $\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$] \label{prop: appearance_of_toroidal_cocycles}
            For any $D, D' \in \divzero$, one has that:
                $$[D, D']_{\extendedtoroidal} \equiv [D, D'] \pmod{\z(\toroidal)}$$
            (where $[D, D'] := DD' - D'D$ is the usual commutator).
        \end{proposition}
            \begin{proof}
                Pick arbitrary elements $D, D' \in \divzero$. From lemma \ref{lemma: yangian_extended_toroidal_lie_algebras_are_extensions}, we know that:
                    $$[D, D']_{\extendedtoroidal} := X(D, D') + Z(D, D') + [D, D']$$
                for some $X(D, D') \in \g_{[2]}, Z(D, D') \in \z(\toroidal)$ depending on $D, D'$. Pick also a test element:
                    $$Y := yg \in \g_{[2]}$$
                for some arbitrary $y \in \g$ and $g \in A$ and set:
                    $$[D, y g]_{\extendedtoroidal} := y D( g ) + K(D, Y)$$
                    $$[D', y g]_{\extendedtoroidal} := y D'( g ) + K(D', Y)$$
                for some $K(D, Y) \in \z(\toroidal)$ depending on $Y$ (cf. lemma \ref{lemma: derivation_action_on_multiloop_algebras}).
                
                Via the Jacobi identity, we get that:
                    $$
                        \begin{aligned}
                            & [ [D, D']_{\extendedtoroidal}, y g ]_{\extendedtoroidal}
                            \\
                            = & [ D, [ D', y g ]_{\extendedtoroidal} ]_{\extendedtoroidal} + [ D', [ y g, D ]_{\extendedtoroidal} ]_{\extendedtoroidal}
                            \\
                            = & [ D, y D'( g ) + K(D', Y) ]_{\extendedtoroidal} - [ D', y D( g ) + K(D, Y) ]_{\extendedtoroidal}
                            \\
                            = & \left( y D( D'(g) ) + K(DD', Y) + [ D, K(D', Y) ]_{\extendedtoroidal} \right) - \left( y D'( D(g) ) + K(D'D, Y) + [ D', K(D, Y) ]_{\extendedtoroidal} \right)
                            \\
                            = & y (DD' - D'D)( g ) + ( K(DD', Y) - K(D'D, Y) ) + ( [ D, K(D', Y) ]_{\extendedtoroidal} - [ D', K(D, Y) ]_{\extendedtoroidal} )
                        \end{aligned}
                    $$
                for some $K(DD', Y), K(D'D, Y) \in \z(\toroidal)$ such that:
                    $$[ D, y D'( g ) ]_{\extendedtoroidal} := y D( D'( g ) ) + K(DD', Y)$$
                    $$[ D', y D( g ) ]_{\extendedtoroidal} := y D( D'( g ) ) + K(D'D, Y)$$
                At the same time, we have that:
                    $$
                        \begin{aligned}
                            & [ [D, D']_{\extendedtoroidal}, y g ]_{\extendedtoroidal}
                            \\
                            = & [ X(D, D') + Z(D, D') + [D, D'] , y g ]_{\extendedtoroidal}
                            \\
                            = & [ X(D, D') + [D, D'] , y g ]_{\extendedtoroidal}
                            \\
                            = & [ X(D, D') , y g ]_{\extendedtoroidal} + \left( y [D, D'](g) + K([D, D'], Y) \right)
                        \end{aligned}
                    $$
                wherein the second equality holds thanks to the fact that $[\z(\toroidal), \g_{[2]}]_{\extendedtoroidal} = 0$, and $K([D, D'], Y) \in \z(\toroidal)$ is some element (cf. lemma \ref{lemma: derivation_action_on_multiloop_algebras}). Combining the two observations together then yields:
                    $$
                        \begin{aligned}
                            & [ X(D, D') , y g ]_{\extendedtoroidal} + \left( y [D, D'](g) + K([D, D'], Y) \right)
                            \\
                            = & y (DD' - D'D)( g ) + ( K(DD', Y) - K(D'D, Y) ) + ( [ D, K(D', Y) ]_{\extendedtoroidal} - [ D', K(D, Y) ]_{\extendedtoroidal} )
                        \end{aligned}
                    $$
                which can be simplified into:
                    $$
                        \begin{aligned}
                            & [ X(D, D') , y g ]_{\extendedtoroidal} + K([D, D'], Y)
                            \\
                            = & ( K(DD', Y) - K(D'D, Y) ) + ( [ D, K(D', Y) ]_{\extendedtoroidal} - [ D', K(D, Y) ]_{\extendedtoroidal} )
                        \end{aligned}
                    $$
                From lemma \ref{lemma: derivation_action_on_multiloop_algebras}, we know that there exists $K( X(D, D'), Y ) \in \z(\toroidal)$ such that:
                    $$[ X(D, D') , y g ]_{\extendedtoroidal} = [ X(D, D') , Y ]_{\extendedtoroidal} = [X(D, D'), Y]_{\g_{[2]}} + K( X(D, D'), Y )$$
                using which we can write:
                    $$
                        \begin{aligned}
                            & [X(D, D'), Y]_{\g_{[2]}}
                            \\
                            = & \left( [ D, K(D', Y) ]_{\extendedtoroidal} - [ D', K(D, Y) ]_{\extendedtoroidal} \right) - \left( K( X(D, D'), Y ) + K([D, D'], Y) \right)
                        \end{aligned}
                    $$
                    
                We note right away that the LHS lies entirely in $\g_{[2]}$, whereas the RHS is an element of $\z(\toroidal)$ due to the fact that $[\divzero, \z(\toroidal)]_{\extendedtoroidal} \subseteq \z(\toroidal)$ (cf. lemma \ref{lemma: derivation_action_on_toroidal_centres}), which tells us that:
                    $$[ D, K(D', Y) ]_{\extendedtoroidal}, [ D', K(D, Y) ]_{\extendedtoroidal} \in \z(\toroidal)$$
                in particular. Because $\g_{[2]}$ is centre-less (as $\g$ is simple and the Lie bracket on $\g_{[2]}$ is given by extension of scalars), this observation subsequently implies that the LHS must vanish, i.e.:
                    $$[X(D, D'), Y]_{\g_{[2]}} = 0$$
                We remind the reader now that $Y \in \g_{[2]}$ was chosen arbitrarily, and again, because $\g_{[2]}$ is centre-less, we now have that:
                    $$X(D, D') = 0$$
                necessarily. In other words, the brackets of the form $[D, D']_{\extendedtoroidal}$ have no $\g_{[2]}$-summand for any $D, D' \in \divzero$, and hence:
                    $$[D, D']_{\extendedtoroidal} \equiv [D, D'] \pmod{\z(\toroidal)}$$
            \end{proof}

        \begin{lemma}[\texorpdfstring{$\z(\toroidal)$}{}-summands of elements of \texorpdfstring{$[\divzero, \g_{[2]}]_{\extendedtoroidal}$}{}] \label{lemma: no_polynomial_terms_for_derivation_action_on_multiloop_algebras}
            For any $x \in \g, f \in A$ and any $D \in \divzero$, we have that:
                $$[D, xf]_{\extendedtoroidal} = x D(f) = \rho(D)(xf)$$
            with $\rho: \divzero \to \der(\toroidal)$ as in corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}. Consequently one has that:
                $$[\divzero, \g_{[2]}]_{\extendedtoroidal} \subseteq \g_{[2]}$$
        \end{lemma}
            \begin{proof}
                From lemma \ref{lemma: derivation_action_on_multiloop_algebras}, we know that given some $D \in \divzero$ and some $x \in \g$ and $f \in A$, there shall exist $K(D, xf) \in \z(\toroidal)$ (depending on the choices of $D$ and $x, f$) such that:
                    $$[D, xf]_{\extendedtoroidal} = x D(f) + K(D, xf)$$
                Next, consider the following:
                    $$( \divzero, x D(f) + K(D, xf) )_{\extendedtoroidal} = ( \divzero, [D, xf]_{\extendedtoroidal} )_{\extendedtoroidal} = ( [\divzero, D]_{\extendedtoroidal}, xf )_{\extendedtoroidal} = 0$$
                where the second equality holds thanks to invariance, and the third equality holds due to a combination of the fact that $[\divzero, \divzero]_{\extendedtoroidal} \subset \z(\toroidal) \oplus \divzero$ (cf. proposition \ref{prop: appearance_of_toroidal_cocycles}) and the fact that $(\z(\toroidal) \oplus \divzero, \g_{[2]})_{\extendedtoroidal} = 0$ per the construction of the bilinear form $(-, -)_{\extendedtoroidal}$. We also have the following, again per the construction of the bilinear form $(-, -)_{\extendedtoroidal}$:
                    $$( \divzero, x D(f) + K(D, xf) )_{\extendedtoroidal} = ( \divzero, K(D, xf) )_{\extendedtoroidal}$$
                This implies that:
                    $$( \divzero, K(D, xf) )_{\extendedtoroidal} = 0$$
                for all $D \in \divzero$ and all $x \in \g, f \in A$. The fact that $( \divzero, \z(\toroidal) )_{\extendedtoroidal} \not = 0$ along with the non-degeneracy of $(-, -)_{\extendedtoroidal}$ then imply together that:
                    $$K(D, xf) = 0$$
                necessarily. This means that, indeed, we have that:
                    $$[D, xf]_{\extendedtoroidal} = x D(f)$$
                for all $D \in \divzero$ and all $x \in \g$ and all $f \in A$. Since $\g_{[2]}$ is generated by elements of the form $xf$, this implies that:
                    $$[\divzero, \g_{[2]}]_{\extendedtoroidal} \subseteq \g_{[2]}$$
                as claimed. 
            \end{proof}

        We have now yielded the following intermediate conclusion:
        \begin{proposition}[$\toroidal$ as a $\divzero$-module] \label{prop: toroidal_lie_algebras_as_modules_over_div_zero_vector_field_lie_algebras}
            The $\divzero$-module structure:
                $$\rho: \divzero \to \der(\toroidal)$$
            satisfies:
                $$[D, X]_{\extendedtoroidal} = \rho(D)(X)$$
            for all $D \in \divzero$ and all $X \in \toroidal$, regardless of our choice of the Lie bracket $[-, -]_{\extendedtoroidal}$ on the vector space $\extendedtoroidal$.
        \end{proposition}
            \begin{proof}
                Combine lemmas \ref{lemma: derivation_action_on_multiloop_algebras} and \ref{lemma: no_polynomial_terms_for_derivation_action_on_multiloop_algebras}, and lemma \ref{lemma: derivation_action_on_toroidal_centres}, with corollary \ref{coro: a_fixed_yangian_div_zero_vector_field_action}.
            \end{proof}
            
        All the requirements for applying proposition \ref{prop: twisted_semi_direct_product_criterion} are now available, and the following proposition concludes our proof of the \say{only if} direction of the main theorem.
        \begin{proposition}[$\gamma$-extended toroidal Lie algebras are twisted semi-direct products] \label{prop: yangian_extended_toroidal_lie_algebras_are_twisted_semi_direct_products}
            Let $\extendedtoroidal$ be a $\gamma$-extended toroidal Lie algebra in the sense of definition \ref{def: yangian_extended_toroidal_lie_algebras}. Then:
            \begin{enumerate}
                \item there will exist some Lie $2$-cocycle $\sigma \in Z^2_{\Lie}(\divzero, \z(\toroidal))$ so that:
                    $$\toroidal \rtimes^{\sigma} \divzero \xrightarrow[\cong]{\id_{\toroidal} \oplus \varphi} \extendedtoroidal$$
                where $\varphi: \divzero \xrightarrow[]{\cong} \z(\toroidal)^{\star}$ being as in proposition \ref{prop: yangian_div_zero_vector_fields_are_graded_dual_to_toroidal_centre}, and
                \item furthermore, the Lie $2$-cocycle $\sigma$ as above satisfies $\gamma$-invariance, i.e. that:
                    $$(\sigma(D, D'), D'')_{\extendedtoroidal} = (D, \sigma(D', D''))_{\extendedtoroidal}$$
                for all $D, D', D'' \in \divzero$.
            \end{enumerate}
        \end{proposition}
            \begin{proof}
                \begin{enumerate}
                    \item Combine proposition \ref{prop: toroidal_lie_algebras_as_modules_over_div_zero_vector_field_lie_algebras} with lemma \ref{lemma: yangian_extended_toroidal_lie_algebras_are_extensions}, and then apply proposition \ref{prop: twisted_semi_direct_product_criterion}.
                    \item Per definition \ref{def: twisted_semi_direct_products}, we know that:
                        $$\sigma(\xi, \xi') = [\xi, \xi']_{\extendedtoroidal} - [\xi, \xi]$$
                    for all $\xi, \xi' \in \divzero$, meaning that we have that:
                        $$
                            \begin{aligned}
                                & (\sigma(D, D'), D'')_{\extendedtoroidal}
                                \\
                                = & ([D, D]_{\extendedtoroidal} - [D, D'], D'')_{\extendedtoroidal}
                                \\
                                = & ([D, D]_{\extendedtoroidal}, D'')_{\extendedtoroidal} 
                                \\
                                = & (D, [D', D'']_{\extendedtoroidal})
                                \\
                                = & (D, [D', D'']_{\extendedtoroidal} - [D', D''])_{\extendedtoroidal}
                                \\
                                = & (D, \sigma(D', D''))_{\extendedtoroidal}
                            \end{aligned}
                        $$
                    wherein the first and second-to-last equalities hold because $(\divzero, \divzero)_{\extendedtoroidal} := 0$ per the construction of the bilinear form $(-, -)_{\extendedtoroidal}$. This is precisely as needed, so we are done.
                \end{enumerate}
            \end{proof}